{"parsed":{"_path":"/drivers/azure-storage-block","_dir":"drivers","_draft":false,"_partial":false,"_locale":"","title":"Azure Blob Storage","description":"Store data in a Azure blob storage.","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"usage"},"children":[{"type":"text","value":"Usage"}]},{"type":"element","tag":"callout","props":{"color":"blue","icon":"i-ph-info-duotone","target":"_blank","to":"https://github.com/Azure/azure-sdk-for-js/tree/main/sdk/storage/storage-blob"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Learn more about Azure blob storage."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This driver stores KV information in a Azure blob storage blob. The same container is used for all entries. Each entry is stored in a separate blob with the key as the blob name and the value as the blob content."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To use it, you will need to install "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"@azure/storage-blob"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"@azure/identity"}]},{"type":"text","value":" in your project:"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes min-light min-dark material-theme-palenight","code":"npm i @azure/storage-blob @azure/identity\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#6F42C1;--shiki-default:#B392F0;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#2B5581;--shiki-default:#9DB1C5;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" i"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#2B5581;--shiki-default:#9DB1C5;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" @azure/storage-blob"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#2B5581;--shiki-default:#9DB1C5;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" @azure/identity\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Please make sure that the container you want to use exists in your storage account."}]},{"type":"element","tag":"pre","props":{"className":"language-js shiki shiki-themes min-light min-dark material-theme-palenight","code":"import { createStorage } from \"unstorage\";\nimport azureStorageBlobDriver from \"unstorage/drivers/azure-storage-blob\";\n\nconst storage = createStorage({\n  driver: azureStorageBlobDriver({\n    accountName: \"myazurestorageaccount\",\n  }),\n});\n","language":"js","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#D32F2F;--shiki-default:#F97583;--shiki-dark:#89DDFF;--shiki-light-font-style:inherit;--shiki-default-font-style:inherit;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#24292EFF;--shiki-default:#B392F0;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#24292EFF;--shiki-default:#B392F0;--shiki-dark:#BABED8"},"children":[{"type":"text","value":" createStorage"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#24292EFF;--shiki-default:#B392F0;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#D32F2F;--shiki-default:#F97583;--shiki-dark:#89DDFF;--shiki-light-font-style:inherit;--shiki-default-font-style:inherit;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":" from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#22863A;--shiki-default:#FFAB70;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#22863A;--shiki-default:#FFAB70;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"unstorage"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#22863A;--shiki-default:#FFAB70;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#24292EFF;--shiki-default:#B392F0;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#D32F2F;--shiki-default:#F97583;--shiki-dark:#89DDFF;--shiki-light-font-style:inherit;--shiki-default-font-style:inherit;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#24292EFF;--shiki-default:#B392F0;--shiki-dark:#BABED8"},"children":[{"type":"text","value":" azureStorageBlobDriver "}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#D32F2F;--shiki-default:#F97583;--shiki-dark:#89DDFF;--shiki-light-font-style:inherit;--shiki-default-font-style:inherit;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#22863A;--shiki-default:#FFAB70;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#22863A;--shiki-default:#FFAB70;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"unstorage/drivers/azure-storage-blob"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#22863A;--shiki-default:#FFAB70;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#24292EFF;--shiki-default:#B392F0;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#D32F2F;--shiki-default:#F97583;--shiki-dark:#C792EA"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#1976D2;--shiki-default:#79B8FF;--shiki-dark:#BABED8"},"children":[{"type":"text","value":" storage"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#D32F2F;--shiki-default:#F97583;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#6F42C1;--shiki-default:#B392F0;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":" createStorage"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#24292EFF;--shiki-default:#B392F0;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#24292EFF;--shiki-default:#B392F0;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#24292EFF;--shiki-default:#B392F0;--shiki-dark:#F07178"},"children":[{"type":"text","value":"  driver"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#D32F2F;--shiki-default:#F97583;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#6F42C1;--shiki-default:#B392F0;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":" azureStorageBlobDriver"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#24292EFF;--shiki-default:#B392F0;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#24292EFF;--shiki-default:#B392F0;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#24292EFF;--shiki-default:#B392F0;--shiki-dark:#F07178"},"children":[{"type":"text","value":"    accountName"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#D32F2F;--shiki-default:#F97583;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#22863A;--shiki-default:#FFAB70;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#22863A;--shiki-default:#FFAB70;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"myazurestorageaccount"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#22863A;--shiki-default:#FFAB70;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#212121;--shiki-default:#BBBBBB;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#24292EFF;--shiki-default:#B392F0;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"  }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#24292EFF;--shiki-default:#B392F0;--shiki-dark:#BABED8"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#212121;--shiki-default:#BBBBBB;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#24292EFF;--shiki-default:#B392F0;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#24292EFF;--shiki-default:#B392F0;--shiki-dark:#BABED8"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#24292EFF;--shiki-default:#B392F0;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Authentication:"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The driver supports the following authentication methods:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"DefaultAzureCredential"}]}]},{"type":"text","value":": This is the recommended way to authenticate. It will use managed identity or environment variables to authenticate the request. It will also work in a local environment by trying to use Azure CLI or Azure PowerShell to authenticate. "},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n⚠️ Make sure that your Managed Identity or personal account has the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Storage Blob Data Contributor"}]},{"type":"text","value":" role assigned to it, even if you already are "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Contributor"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Owner"}]},{"type":"text","value":" on the storage account."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"AzureNamedKeyCredential"}]}]},{"type":"text","value":" (only available in Node.js runtime): This will use the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"accountName"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"accountKey"}]},{"type":"text","value":" to authenticate the request."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"AzureSASCredential"}]}]},{"type":"text","value":": This will use the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"accountName"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"sasToken"}]},{"type":"text","value":" to authenticate the request."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"connection string"}]},{"type":"text","value":" (only available in Node.js runtime): This will use the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"connectionString"}]},{"type":"text","value":" to authenticate the request. This is not recommended as it will expose your account key in plain text."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Options:"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"accountName"}]}]},{"type":"text","value":" (required): The name of your storage account."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"containerName"}]},{"type":"text","value":": The name of the blob container to use. Defaults to "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"unstorage"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"accountKey"}]},{"type":"text","value":": The account key to use for authentication. This is only required if you are using "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"AzureNamedKeyCredential"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"sasKey"}]},{"type":"text","value":": The SAS token to use for authentication. This is only required if you are using "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"AzureSASCredential"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"connectionString"}]},{"type":"text","value":": The storage accounts' connection string. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"accountKey"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"sasKey"}]},{"type":"text","value":" take precedence."}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"usage","depth":2,"text":"Usage"}]}},"_type":"markdown","_id":"content:2.drivers:azure-storage-block.md","_source":"content","_file":"2.drivers/azure-storage-block.md","_extension":"md"},"hash":"nvKWsc9yGa"}